%h1#page-title Комментарии преподавателя

%div#comment-block
  %h1#title Последние коммментарии
  - @comments.each do |lc|
    - cls = comment_class_by_mark(lc.comment.mark)
    %div.comment{class: cls}
      %p.title
        %span.left-c= link_to lc.comment.user.login, profile_path(lc.comment.user.login)
        %span.right-c
          =lc.comment.posttime.strftime('%0e.%0m.%Y, %H:%M')
          - if can_admin? || lc.comment.user_id == logged_user.id
            = link_to "[X]", delete_lecturer_comment_path(lc.id), method: 'delete'
      %div{style: "clear: both;"}
      %p.body
        ="#{lc.comment.body}"

- if logged? && logged_user.student?
  %p.button#show-comment-form Добавить комментарий
  = form_tag :add_lecturer_comment, id: "add-comment-form", :method => 'post' do
    = hidden_field_tag :lecturer_id, @lecturer_id
    %p.regform-field
      - mark_list = [['Негативный', 0], ['Нейтральный', 1], ['Позитивный', 2]]
      = label_tag :mark, "Тип комментария", class: "inline"
      = select_tag :mark, options_for_select(mark_list, Comment::MARKS[:neutral])
    %p.regform-field
      = text_area_tag :body, "", size: "60x9"
    %p.regform-field
      = submit_tag "Оставить комментарий преподавателю"
      %span.button#cancel-add-comment Отменить

= link_to "На страницу преподавателя", profile_path(Lecturer.find(@lecturer_id).user.login), class: 'button'